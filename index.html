<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Break-Even Calculator</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
        /* Optional: for a slightly sleeker look on a dark theme */
        body {
            background-color: #0d1117;
        }
        .card {
            background-color: #161b22;
            border: 1px solid #30363d;
        }
    </style>
</head>
<body>

    <nav class="navbar navbar-expand-lg bg-dark" data-bs-theme="dark">
    <div class="container">
        <a class="navbar-brand" href="index.html">Crypto Calculator</a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="index.html">Break Even</a>
                </li>
                </ul>
        </div>
    </div>
</nav>
    
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6">
                
            <div class="text-center mb-4">
                <h1 class="fw-light">Crypto Break-Even Calculator</h1>
                <p class="text-body-secondary">Instantly calculate your break-even points for crypto trades.</p>
                
                <p class="text-body-secondary px-3">
                    <small>
                        Every crypto trade on an exchange involves fees for both buying and selling. This calculator is designed for a <strong>full round-trip trade</strong> on Spot trading. It determines the break-even price needed to close a position (e.g., buying an asset and later selling it) by accounting for the transaction fees on <strong>both</strong> the entry and exit.</small>
                </p>
            </div>

                <div class="card shadow-sm">
                    <div class="card-body p-4">
                        
                        <div class="mb-3">
                            <label for="price" class="form-label">Asset Price</label>
                            <input type="number" class="form-control form-control-lg" id="price" placeholder="e.g., 0.63" step="any" required>
                        </div>
                        
                        <div class="mb-4">
                            <label for="fees" class="form-label">Trading Fee (%)</label>
                            <input type="number" class="form-control form-control-lg" id="fees" value="0.1" step="0.01" required>
                        </div>

                        <hr class="my-4">

                        <h4 class="fw-light mb-3">Results</h4>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center bg-transparent border-secondary">
                                Break-Even Sell Price
                                <span id="sell-break-even" class="badge bg-success fs-6 rounded-pill">0.0000</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center bg-transparent border-secondary">
                                Break-Even Buy Price
                                <span id="buy-break-even" class="badge bg-danger fs-6 rounded-pill">0.0000</span>
                            </li>
                        </ul>
                        
                        <div class="form-text mt-3">
                           <small>
                               <strong>Break-Even Sell Price:</strong> The price you must sell at to cover the trading fees for both the buy and sell transactions.
                           </small>
                        </div>
                         <div class="form-text mt-2">
                           <small>
                               <strong>Break-Even Buy Price:</strong> The price you must buy at to cover the trading fees for both the sell and buy transactions.
                           </small>
                        </div>

                    </div>
                </div>
                 <div class="text-center mt-3">
                    <small class="text-body-secondary">Designed by Kostas Panagias.</small>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

    <script>
        // Get references to the HTML elements
        const priceInput = document.getElementById('price');
        const feesInput = document.getElementById('fees');
        const sellResultElem = document.getElementById('sell-break-even');
        const buyResultElem = document.getElementById('buy-break-even');

        function calculateBreakEven() {
            // Get values from input fields and convert them to numbers
            const price = parseFloat(priceInput.value);
            const feePercent = parseFloat(feesInput.value);

            // Validate that inputs are actual numbers and greater than zero
            if (isNaN(price) || isNaN(feePercent) || price <= 0) {
                sellResultElem.textContent = '0.0000';
                buyResultElem.textContent = '0.0000';
                return;
            }

            const feeDecimal = feePercent / 100;

            // --- Calculation Logic ---
            // Based on your example: buying at 0.63 with 0.1% fee needs a 0.6313 break-even.
            // This implies covering the fee for the buy and the sell transaction (2x fees).
            // A common approximation for this is: Price * (1 + 2 * Fee)
            // 0.63 * (1 + 2 * 0.001) = 0.63 * 1.002 = 0.63126
            const sellBreakEvenRaw = price * (1 + 2 * feeDecimal);

            // This is your formula for a single transaction (net value after selling)
            // It was named "buy break even" in your request.
            const buyBreakEvenRaw = price * (1 - 2 * feeDecimal);
            
            // Apply the CEILING.MATH logic: multiply by 10000, get the ceiling, then divide by 10000
            const sellBreakEven = Math.ceil(sellBreakEvenRaw * 10000) / 10000;
            const buyBreakEven = Math.floor(buyBreakEvenRaw * 10000) / 10000;


            // Update the display with the calculated values, formatted to 4 decimal places
            sellResultElem.textContent = sellBreakEven.toFixed(4);
            buyResultElem.textContent = buyBreakEven.toFixed(4);
        }

        // Add event listeners to run the calculation whenever the user types in either input
        priceInput.addEventListener('input', calculateBreakEven);
        feesInput.addEventListener('input', calculateBreakEven);
        
        // Run once on page load to clear the initial values if needed
        document.addEventListener('DOMContentLoaded', calculateBreakEven);

    </script>
</body>
</html>
